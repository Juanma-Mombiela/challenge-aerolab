(this.webpackJsonpchallengeaerolab=this.webpackJsonpchallengeaerolab||[]).push([[0],{100:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(81),i=n.n(a),s=n(130),o=n(17),l=n.n(o),u=n(68),d=n(30),j=n(4),b="https://coding-challenge-api.aerolab.co/",h={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGFmY2JmMTliNzc4MTAwMjA5YzVhYTciLCJpYXQiOjE2MjIxMzM3NDV9.wJHwG7IP_nbLIBvNzz5r4oagpb8h-4vQW6kX52AYOzk"},x={getUser:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(b+"user/me",{method:"GET",headers:h}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getProducts:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(b+"products",{method:"GET",headers:h}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getHistory:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(b+"user/history",{method:"GET",headers:h}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),redeem:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(b+"redeem",{body:JSON.stringify({productId:t}),method:"POST",headers:h}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addPoints:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(b+"user/points",{method:"POST",body:JSON.stringify({amount:t}),headers:h}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=n(46),f=n.n(p),g=n(134),O=n(132),m=n(119),v=n(34),y=n(3),w={duration:.3,yoyo:1/0,ease:"easeOut"},S=function(){return Object(y.jsxs)(g.a,{align:"center",bg:"neutral",height:"100vh",justify:"center",width:"100vw",children:[Object(y.jsx)(v.a.image,{animate:{y:["0%","-100%"]},transition:{y:w,width:w,height:w},children:Object(y.jsx)(O.a,{src:"../assets/logo.svg",w:10})}),Object(y.jsx)(m.a,{textAlign:"center",children:"Loading..."})]})},C=Object(r.createContext)(),z=function(e){var t=Object(r.useState)(),n=Object(j.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(!0),s=Object(j.a)(i,2),o=s[0],b=s[1],h=Object(r.useState)(!0),p=Object(j.a)(h,2),g=p[0],O=p[1],m=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.abrupt("return",x.addPoints(t).then((function(e){a(Object(u.a)(Object(u.a)({},c),{},{points:e["New Points"]})),O(!1)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.abrupt("return",x.redeem(t).then((function(e){var t=e.message,n=e.error;t?x.getUser().then((function(e){return a(e)})).then((function(){O(!1),f.a.fire({icon:"success",title:"Product Buy!",text:"Yes"})})):(f.a.fire({icon:"error",title:"There is an error",text:"Can't redeem now, try later",footer:n}),O(!1))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){x.getUser().then((function(e){a(e),O(!1),b(!1)}))}),[]),!c||o?Object(y.jsx)(S,{}):Object(y.jsx)(C.Provider,{value:{user:c,addPoints:m,redeem:v,pointsLoading:g},children:e.children})},I=n(39),P=(n(100),n(11)),k=n(120),H=function(){return Object(y.jsx)(k.a,{background:"url(../assets/header.png) center right",backgroundSize:"cover",minHeight:"412px",width:"100%",children:Object(y.jsx)(m.a,{color:"white",fontSize:"64px",alignSelf:"flex-end",padding:6,children:"Electronics"})})},T=n(121),A=n(124),L=n(125),J=n(108),M=n(122),W=function(e){var t=e.sortSelected,n=e.handleChange,r=Object(J.a)({base:"base",sm:"small"});return Object(y.jsxs)(g.a,{alignItems:"center",direction:{base:"column",sm:"row"},children:[Object(y.jsx)(T.a,{color:"a3a3a3",children:"Sort by:"}),Object(y.jsx)(g.a,{direction:"row",spacing:2,children:[{value:"recent",fullText:"Most Recent",mobile:"Recent"},{value:"lowest",fullText:"Lowest Price",mobile:"Lowest"},{value:"highest",fullText:"Highest Price",mobile:"Highest"}].map((function(e){return Object(y.jsx)(M.a,{as:"button",bg:e.value===t?"primary":"#ededed",color:e.value===t?"white":"#a3a3a3",cursor:"pointer",paddingY:1,paddingX:4,rounded:999,onClick:function(){return n(e.value)},children:Object(y.jsx)(T.a,{children:"base"===r?e.mobile:e.fullText})},e.value)}))})]})},E=n(123),Y=n(129);function _(){var e=Object(r.useContext)(C),t=e.user,n=e.addPoints,c=e.redeem,a=e.pointsLoading;return{points:t.points,addPoints:n,redeem:c,loading:a}}var B=function(e){var t=e.id,n=e.cost,r=_(),c=r.redeem,a=r.loading;return Object(y.jsxs)(g.a,{bgGradient:"linear(to-b, #0ad4faCC 0%, #25bbf1CC 100%)",height:"100%",left:"0",opacity:0,padding:2.5,position:"absolute",top:"0",rounded:4,spacing:4,width:"100%",transitionDuration:"0.4s",transitionProperty:"transform",_hover:{opacity:"1"},zIndex:200,children:[Object(y.jsx)(O.a,{src:"../assets/icons/buy-white.svg",maxH:"42px",maxW:"42px",alignSelf:"flex-end",loading:"lazy"}),Object(y.jsxs)(g.a,{isInline:!0,justify:"center",align:"center",children:[Object(y.jsx)(T.a,{fontSize:"36px",letterSpacing:"-0.08px",textAlign:"center",color:"white",children:n}),Object(y.jsx)(g.a,{children:Object(y.jsx)(O.a,{boxSize:"36px",borderRadius:"100%",marginTop:2.5,src:"../assets/icons/coin.svg",loading:"lazy"})})]}),Object(y.jsx)(Y.a,{rounded:999,backgroundColor:"white",isLoading:a,onClick:function(){a?f.a.fire({icon:"error",title:"Can't redeem",text:"You can't redeem now, await actual redeem"}):c(t,n)},children:"Redeem now"})]})};function D(){return Object(r.useContext)(C).user}var G=function(e){var t=e.product,n=D().points,c=t._id,a=t.name,i=t.cost,s=t.category,o=t.img,l=Object(r.useState)(!1),u=Object(j.a)(l,2),d=u[0],b=u[1];return Object(y.jsxs)(g.a,{bg:"white",boxShadow:"2px 2px 4px 0 rgba(0,0,0,0.1)",height:"276px",padding:2.5,position:"relative",rounded:4,spacing:0,width:"276px",transitionDuration:"0.4s",transitionProperty:"transform",_hover:{transform:"translateY(-0.7em)"},onMouseLeave:function(){return b(!1)},onMouseEnter:function(){return b(!0)},children:[n>=i&&Object(y.jsx)(B,{id:c,cost:i}),Object(y.jsxs)(g.a,{spacing:4,children:[Object(y.jsxs)(g.a,{spacing:0,alignItems:"flex-end",children:[n>=i?Object(y.jsx)(O.a,{src:"../assets/icons/buy-blue.svg",marginBottom:-10,maxH:"42px",maxW:"42px",opacity:d?0:1,zIndex:100,loading:"lazy"}):Object(y.jsxs)(E.a,{bg:"#616161CC",marginBottom:-10,rounded:999,zIndex:100,children:[Object(y.jsxs)(E.b,{children:["You need ",i-n," "]}),Object(y.jsx)(O.a,{src:"../assets/icons/coin.svg",ml:1,mt:1,maxW:"32px",maxH:"32px",loading:"lazy"})]}),Object(y.jsx)(O.a,{src:o.hdUrl,alt:a,loading:"lazy"}),Object(y.jsx)(A.a,{})]}),Object(y.jsxs)(g.a,{textAlign:"start",spacing:0,children:[Object(y.jsx)(T.a,{color:"#a3a3a3",children:s}),Object(y.jsx)(T.a,{color:"#616161",children:a})]})]})]})},N=n(16),R=function(e){var t=e.products,n=e.productsPerPage,c=Object(r.useState)(1),a=Object(j.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)(t),l=Object(j.a)(o,2),u=l[0],d=l[1],b=Object(r.useState)("recent"),h=Object(j.a)(b,2),x=h[0],p=h[1];Object(r.useEffect)((function(){s(1),d(function(e,t){var n=Object(N.a)(e);switch(t){case"lowest":return n.sort((function(e,t){return e.cost-t.cost}));case"highest":return n.sort((function(e,t){return t.cost-e.cost}));default:return n.sort((function(e,t){return e._id>t._id?1:t._id>e._id?-1:0}))}}(t,x))}),[x,t]);return Object(y.jsxs)(g.a,{padding:4,spacing:3,children:[Object(y.jsxs)(g.a,{alignItems:"center",align:"center",as:"nav",justify:"space-between",direction:{base:"column",sm:"row"},children:[Object(y.jsxs)(g.a,{isInline:!0,align:"center",children:[Object(y.jsxs)(T.a,{color:"gray.700",fontWeight:"semibold",children:[i*n," of ",t.length," products"]}),Object(y.jsx)(A.a,{display:["none","initial"],h:"30px",orientation:"vertical"}),Object(y.jsx)(W,{sortSelected:x,handleChange:function(e){p(e)}})]}),Object(y.jsxs)(g.a,{display:{base:"none",sm:"flex"},children:[1!==i&&Object(y.jsx)(O.a,{cursor:"pointer",loading:"lazy",src:"../assets/icons/arrow-left.svg",onClick:function(){return s((function(e){return e-1}))}}),n!==t.length/i&&Object(y.jsx)(O.a,{cursor:"pointer",loading:"lazy",src:"../assets/icons/arrow-right.svg",onClick:function(){return s((function(e){return e+1}))}})]})]}),Object(y.jsx)(A.a,{variant:"solid"}),Object(y.jsx)(L.a,{gap:3,templateColumns:"repeat(auto-fill, minmax(276px, 1fr))",width:"100%",justifyItems:"center",children:null===u||void 0===u?void 0:u.slice((i-1)*n,n*i).map((function(e,t){return Object(y.jsx)(v.a.div,{animate:"visible",layout:!0,custom:t,initial:"hidden",variants:{hidden:{opacity:0,y:100},visible:function(e){return{opacity:1,y:0,transition:{delay:.06*e}}}},children:Object(y.jsx)(G,{product:e},e._id)},e._id)}))}),Object(y.jsx)(A.a,{variant:"solid"}),Object(y.jsxs)(g.a,{isInline:!0,align:"center",justify:"space-between",children:[Object(y.jsxs)(T.a,{color:"gray.700",fontWeight:"semibold",children:[i*n," of ",t.length," products"]}),Object(y.jsxs)(g.a,{isInline:!0,children:[1!==i&&Object(y.jsx)(O.a,{cursor:"pointer",loading:"lazy",src:"../assets/icons/arrow-left.svg",onClick:function(){return s((function(e){return e-1}))}}),n!==t.length/i&&Object(y.jsx)(O.a,{cursor:"pointer",loading:"lazy",src:"../assets/icons/arrow-right.svg",onClick:function(){return s((function(e){return e+1}))}})]})]})]})},U=n(126),X=function(e){var t=e.productsPerPage;return Object(y.jsxs)(g.a,{padding:8,spacing:3,textAlign:"center",children:[Object(y.jsx)(g.a,{align:"center",padding:2}),Object(y.jsx)(A.a,{}),Object(y.jsx)(L.a,{gap:3,templateColumns:"repeat(auto-fill, minmax(276px, 1fr))",width:"100%",justifyItems:"center",children:Object(N.a)(Array(t)).map((function(e,t){return Object(y.jsx)(v.a.div,{animate:"visible",layout:!0,custom:t,initial:"hidden",variants:{hidden:{opacity:0,y:100},visible:function(e){return{opacity:1,y:0,transition:{delay:.06*e}}}},children:Object(y.jsxs)(g.a,{bg:"white",boxShadow:"2px 2px 4px 0 rgba(0,0,0,0.1)",padding:2.5,height:"276px",width:"276px",children:[Object(y.jsx)(U.b,{alignSelf:"flex-end"}),Object(y.jsx)(U.a,{children:Object(y.jsx)(g.a,{w:"240px",h:"160px"})}),Object(y.jsx)(A.a,{}),Object(y.jsx)(U.c,{mt:"4",noOfLines:2,spacing:"4",w:28})]})},t)}))})]})},Q=function(){var e=Object(r.useState)(),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!0),i=Object(j.a)(a,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){x.getProducts().then((function(e){c(e),o(!1)}))}),[]),Object(y.jsxs)(g.a,{bg:"#f9f9f9",children:[Object(y.jsx)(H,{}),s?Object(y.jsx)(X,{productsPerPage:16}):Object(y.jsx)(R,{products:n,productsPerPage:16})]})},V=function(){var e,t=D();return Object(y.jsxs)(g.a,{bg:"#f9f9f9",minH:"100vh",spacing:3,children:[Object(y.jsx)(k.a,{background:"url(../assets/header.png) center right",backgroundSize:"cover",filter:"invert(20%)",minHeight:"200px",width:"100%",children:Object(y.jsx)(m.a,{color:"white",fontSize:"64px",alignSelf:"flex-end",padding:6,children:"History"})}),Object(y.jsx)(g.a,{padding:4,children:Object(y.jsx)(L.a,{gap:4,templateColumns:"repeat(auto-fill, minmax(320px, 1fr))",width:"100%",children:null===(e=t.redeemHistory)||void 0===e?void 0:e.slice(0).reverse().map((function(e){var t=new Date(e.createDate);return Object(y.jsxs)(g.a,{border:"2px",borderColor:"secondary",isInline:!0,alignItems:"center",children:[Object(y.jsx)(g.a,{h:"100%",bg:"white",children:Object(y.jsx)(O.a,{alt:e.name,src:e.img.hdUrl,w:"300px",objectFit:"contain",h:"100%",loading:"lazy"})}),Object(y.jsxs)(g.a,{w:"100%",justify:"center",spacing:0,children:[Object(y.jsx)(T.a,{color:"#a3a3a3",fontWeight:"bold",children:e.category}),Object(y.jsx)(T.a,{fontWeight:"bold",children:e.name}),Object(y.jsxs)(T.a,{children:["Date: ",t.toLocaleDateString("es-ar")]})]}),Object(y.jsxs)(g.a,{w:"100%",justify:"center",align:"center",spacing:0,isInline:!0,children:[Object(y.jsx)(T.a,{align:"center",children:e.cost}),Object(y.jsx)(O.a,{src:"../assets/icons/coin.svg",loading:"lazy"})]})]},e.createDate)}))})})]})},F=function(){return Object(y.jsxs)(P.d,{children:[Object(y.jsx)(P.b,{path:"/redeems",component:V}),Object(y.jsx)(P.b,{path:"/home",component:Q}),Object(y.jsx)(P.a,{to:"/home"})]})},q=n(47),K=n(133),Z=n(128),$=n(131),ee=function(e){var t=e.userPoints,n=e.handleAddCoins,c=e.loading,a=Object(r.useState)(!1),i=Object(j.a)(a,2),s=i[0],o=i[1];return Object(y.jsxs)(Z.a,{children:[Object(y.jsx)(Z.g,{children:Object(y.jsxs)(Y.a,{rounded:99,height:"48px",isLoading:c,spinner:Object(y.jsx)($.a,{isIndeterminate:!0,color:"secondary"}),onClick:function(){return o(!s)},children:[Object(y.jsx)(T.a,{color:"#616161",fontSize:"xl",letterSpacing:"-0.15px",lineHeight:"48px",children:t}),Object(y.jsx)(O.a,{src:"../assets/icons/coin.svg",ml:1,mt:1,loading:"lazy"})]})}),Object(y.jsxs)(Z.e,{children:[Object(y.jsx)(Z.b,{}),Object(y.jsx)(Z.d,{}),Object(y.jsx)(Z.f,{children:Object(y.jsx)(T.a,{children:"Add Coins to your Wallet!"})}),Object(y.jsx)(Z.c,{children:Object(y.jsx)(g.a,{isInline:!0,align:"center",children:[1e3,5e3,7500].map((function(e){return Object(y.jsxs)(Y.a,{rounded:99,value:e,disabled:c,color:"#616161",letterSpacing:"-0.15px",onClick:function(){return n(e)},children:[e,Object(y.jsx)(O.a,{src:"../assets/icons/coin.svg",ml:1,mt:1,width:6,cursor:"default",loading:"lazy"})]},e)}))})})]})]})},te=function(){var e=D().name,t=_(),n=t.points,r=t.addPoints,c=t.loading;return Object(y.jsxs)(g.a,{as:"nav",isInline:!0,alignItems:"center",height:"80px",justifyContent:"space-between",bg:"white",children:[Object(y.jsx)(I.b,{to:"/home",children:Object(y.jsx)(O.a,{src:"../assets/logo.svg",ml:4,loading:"lazy"})}),Object(y.jsxs)(g.a,{isInline:!0,align:"center",justify:"center",mr:4,children:[Object(y.jsx)(T.a,{fontSize:"xl",color:"#616161",letterSpacing:"-0.15px",lineHeight:"48px",children:e}),Object(y.jsx)(Y.a,{variant:"link",as:I.b,to:"/redeems",children:Object(y.jsx)(q.a,{as:K.a,color:"secondary",height:10,width:10})}),Object(y.jsx)(ee,{handleAddCoins:function(e){r(e)},loading:c,userPoints:n})]})]})},ne=function(){return Object(y.jsxs)(g.a,{maxW:"1440px",width:"100%",margin:"auto",bg:"#f9f9f9",m:{base:0,xl:4},spacing:0,minH:"100vh",children:[Object(y.jsx)(te,{}),Object(y.jsx)(F,{})]})},re=n(127),ce=Object(re.a)({colors:{primary:"#0ad4fa",secondary:"#fb7b04",neutral:"#eceef3"},fonts:{body:"SourceSansPro-Regular, system-ui, sans-serif",heading:"SourceSansPro-Bold",mono:"SourceSansPro-Bold"},shadows:{outline:"0"}});i.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(s.a,{resetCSS:!0,theme:ce,children:Object(y.jsx)(z,{children:Object(y.jsx)(I.a,{children:Object(y.jsx)(ne,{})})})})}),document.getElementById("root"))}},[[104,1,2]]]);
//# sourceMappingURL=main.350c19b9.chunk.js.map