{"ast":null,"code":"var _jsxFileName = \"/home/jmombiela/proyectos/challenge-aerolab/src/context/UserContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, createContext, useEffect } from \"react\";\nimport { api } from \"../api/api\";\nimport Swal from \"sweetalert2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext();\nexport const UserProvider = props => {\n  _s();\n\n  const [user, setUser] = useState();\n  const [pointsLoading, setPointsLoading] = useState(true);\n\n  const handleAddPoints = async pointsToAdd => {\n    setPointsLoading(true);\n    return api.addPoints(pointsToAdd).then(res => {\n      setUser({ ...user,\n        points: res[\"New Points\"]\n      });\n      setPointsLoading(false);\n    });\n  };\n\n  const handleRedeem = async id => {\n    setPointsLoading(true);\n    return api.redeem(id).then(({\n      message,\n      error\n    }) => {\n      if (message) {\n        api.getUser().then(user => setUser(user)).then(() => {\n          setPointsLoading(false);\n          Swal.fire({\n            icon: \"success\",\n            title: \"Product Buy!\",\n            text: \"Wiiiii\"\n          });\n        });\n      } else {\n        Swal.fire({\n          icon: \"error\",\n          title: \"Crap...\",\n          text: \"You can't redeem now, report with admin\",\n          footer: error\n        });\n        setPointsLoading(false);\n      }\n    });\n  };\n\n  useEffect(() => {\n    api.getUser().then(user => {\n      setUser(user);\n      setPointsLoading(false);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      user,\n      addPoints: handleAddPoints,\n      redeem: handleRedeem,\n      pointsLoading\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserProvider, \"ngr3COqgoucsSUcEAVLV+kx+Nco=\");\n\n_c = UserProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"sources":["/home/jmombiela/proyectos/challenge-aerolab/src/context/UserContext.js"],"names":["React","useState","createContext","useEffect","api","Swal","UserContext","UserProvider","props","user","setUser","pointsLoading","setPointsLoading","handleAddPoints","pointsToAdd","addPoints","then","res","points","handleRedeem","id","redeem","message","error","getUser","fire","icon","title","text","footer","children"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,aAA1B,EAAyCC,SAAzC,QAA0D,OAA1D;AACA,SAASC,GAAT,QAAoB,YAApB;AACA,OAAOC,IAAP,MAAiB,aAAjB;;AAEA,OAAO,MAAMC,WAAW,gBAAGJ,aAAa,EAAjC;AAEP,OAAO,MAAMK,YAAY,GAAIC,KAAD,IAAW;AAAA;;AACrC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,EAAhC;AACA,QAAM,CAACU,aAAD,EAAgBC,gBAAhB,IAAoCX,QAAQ,CAAC,IAAD,CAAlD;;AAEA,QAAMY,eAAe,GAAG,MAAOC,WAAP,IAAuB;AAC7CF,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACA,WAAOR,GAAG,CAACW,SAAJ,CAAcD,WAAd,EAA2BE,IAA3B,CAAiCC,GAAD,IAAS;AAC9CP,MAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAWS,QAAAA,MAAM,EAAED,GAAG,CAAC,YAAD;AAAtB,OAAD,CAAP;AACAL,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,KAHM,CAAP;AAID,GAND;;AAQA,QAAMO,YAAY,GAAG,MAAOC,EAAP,IAAc;AACjCR,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACA,WAAOR,GAAG,CAACiB,MAAJ,CAAWD,EAAX,EAAeJ,IAAf,CAAoB,CAAC;AAAEM,MAAAA,OAAF;AAAWC,MAAAA;AAAX,KAAD,KAAwB;AACjD,UAAID,OAAJ,EAAa;AACXlB,QAAAA,GAAG,CACAoB,OADH,GAEGR,IAFH,CAESP,IAAD,IAAUC,OAAO,CAACD,IAAD,CAFzB,EAGGO,IAHH,CAGQ,MAAM;AACVJ,UAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAP,UAAAA,IAAI,CAACoB,IAAL,CAAU;AACRC,YAAAA,IAAI,EAAE,SADE;AAERC,YAAAA,KAAK,EAAE,cAFC;AAGRC,YAAAA,IAAI,EAAE;AAHE,WAAV;AAKD,SAVH;AAWD,OAZD,MAYO;AACLvB,QAAAA,IAAI,CAACoB,IAAL,CAAU;AACRC,UAAAA,IAAI,EAAE,OADE;AAERC,UAAAA,KAAK,EAAE,SAFC;AAGRC,UAAAA,IAAI,EAAE,yCAHE;AAIRC,UAAAA,MAAM,EAAEN;AAJA,SAAV;AAMAX,QAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD;AACF,KAtBM,CAAP;AAuBD,GAzBD;;AA2BAT,EAAAA,SAAS,CAAC,MAAM;AACdC,IAAAA,GAAG,CAACoB,OAAJ,GAAcR,IAAd,CAAoBP,IAAD,IAAU;AAC3BC,MAAAA,OAAO,CAACD,IAAD,CAAP;AACAG,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,KAHD;AAID,GALQ,EAKN,EALM,CAAT;AAOA,sBACE,QAAC,WAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE;AACLH,MAAAA,IADK;AAELM,MAAAA,SAAS,EAAEF,eAFN;AAGLQ,MAAAA,MAAM,EAAEF,YAHH;AAILR,MAAAA;AAJK,KADT;AAAA,cAQGH,KAAK,CAACsB;AART;AAAA;AAAA;AAAA;AAAA,UADF;AAYD,CA1DM;;GAAMvB,Y;;KAAAA,Y","sourcesContent":["import React, { useState, createContext, useEffect } from \"react\";\nimport { api } from \"../api/api\";\nimport Swal from \"sweetalert2\";\n\nexport const UserContext = createContext();\n\nexport const UserProvider = (props) => {\n  const [user, setUser] = useState();\n  const [pointsLoading, setPointsLoading] = useState(true);\n\n  const handleAddPoints = async (pointsToAdd) => {\n    setPointsLoading(true);\n    return api.addPoints(pointsToAdd).then((res) => {\n      setUser({ ...user, points: res[\"New Points\"] });\n      setPointsLoading(false);\n    });\n  };\n\n  const handleRedeem = async (id) => {\n    setPointsLoading(true);\n    return api.redeem(id).then(({ message, error }) => {\n      if (message) {\n        api\n          .getUser()\n          .then((user) => setUser(user))\n          .then(() => {\n            setPointsLoading(false);\n            Swal.fire({\n              icon: \"success\",\n              title: \"Product Buy!\",\n              text: \"Wiiiii\",\n            });\n          });\n      } else {\n        Swal.fire({\n          icon: \"error\",\n          title: \"Crap...\",\n          text: \"You can't redeem now, report with admin\",\n          footer: error,\n        });\n        setPointsLoading(false);\n      }\n    });\n  };\n\n  useEffect(() => {\n    api.getUser().then((user) => {\n      setUser(user);\n      setPointsLoading(false);\n    });\n  }, []);\n\n  return (\n    <UserContext.Provider\n      value={{\n        user,\n        addPoints: handleAddPoints,\n        redeem: handleRedeem,\n        pointsLoading,\n      }}\n    >\n      {props.children}\n    </UserContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}