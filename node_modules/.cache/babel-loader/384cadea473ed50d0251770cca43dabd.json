{"ast":null,"code":"var _jsxFileName = \"/home/jmombiela/proyectos/challenge-aerolab/src/context/UserContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, createContext, useEffect } from \"react\";\nimport { api } from \"../api/api\";\nimport Swal from \"sweetalert2\";\nimport LoadingPage from \"../components/LoadingPage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext();\nexport const UserProvider = props => {\n  _s();\n\n  const [user, setUser] = useState();\n  const [loading, setLoading] = useState(true);\n  const [pointsLoading, setPointsLoading] = useState(true);\n\n  const handleAddPoints = async pointsToAdd => {\n    setPointsLoading(true);\n    return api.addPoints(pointsToAdd).then(res => {\n      setUser({ ...user,\n        points: res[\"New Points\"]\n      });\n      setPointsLoading(false);\n    });\n  };\n\n  const handleRedeem = async id => {\n    setPointsLoading(true);\n    return api.redeem(id).then(({\n      message,\n      error\n    }) => {\n      if (message) {\n        api.getUser().then(user => setUser(user)).then(() => {\n          setPointsLoading(false);\n          Swal.fire({\n            icon: \"success\",\n            title: \"Product Buy!\",\n            text: \"Yes\"\n          });\n        });\n      } else {\n        Swal.fire({\n          icon: \"error\",\n          title: \"There is an error\",\n          text: \"Can't redeem now, try later\",\n          footer: error\n        });\n        setPointsLoading(false);\n      }\n    });\n  };\n\n  useEffect(() => {\n    api.getUser().then(user => {\n      setUser(user);\n      setPointsLoading(false);\n      setLoading(false);\n    });\n  }, []);\n\n  if (!user || loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      user,\n      addPoints: handleAddPoints,\n      redeem: handleRedeem,\n      pointsLoading\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserProvider, \"UgF1NrOk1WUi0RrYAbFRpdmMd7Y=\");\n\n_c = UserProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"sources":["/home/jmombiela/proyectos/challenge-aerolab/src/context/UserContext.js"],"names":["React","useState","createContext","useEffect","api","Swal","LoadingPage","UserContext","UserProvider","props","user","setUser","loading","setLoading","pointsLoading","setPointsLoading","handleAddPoints","pointsToAdd","addPoints","then","res","points","handleRedeem","id","redeem","message","error","getUser","fire","icon","title","text","footer","children"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,aAA1B,EAAyCC,SAAzC,QAA0D,OAA1D;AACA,SAASC,GAAT,QAAoB,YAApB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;;AAEA,OAAO,MAAMC,WAAW,gBAAGL,aAAa,EAAjC;AAEP,OAAO,MAAMM,YAAY,GAAIC,KAAD,IAAW;AAAA;;AACrC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,EAAhC;AACA,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACa,aAAD,EAAgBC,gBAAhB,IAAoCd,QAAQ,CAAC,IAAD,CAAlD;;AAEA,QAAMe,eAAe,GAAG,MAAOC,WAAP,IAAuB;AAC7CF,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACA,WAAOX,GAAG,CAACc,SAAJ,CAAcD,WAAd,EAA2BE,IAA3B,CAAiCC,GAAD,IAAS;AAC9CT,MAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAWW,QAAAA,MAAM,EAAED,GAAG,CAAC,YAAD;AAAtB,OAAD,CAAP;AACAL,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,KAHM,CAAP;AAID,GAND;;AAQA,QAAMO,YAAY,GAAG,MAAOC,EAAP,IAAc;AACjCR,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACA,WAAOX,GAAG,CAACoB,MAAJ,CAAWD,EAAX,EAAeJ,IAAf,CAAoB,CAAC;AAAEM,MAAAA,OAAF;AAAWC,MAAAA;AAAX,KAAD,KAAwB;AACjD,UAAID,OAAJ,EAAa;AACXrB,QAAAA,GAAG,CACAuB,OADH,GAEGR,IAFH,CAEST,IAAD,IAAUC,OAAO,CAACD,IAAD,CAFzB,EAGGS,IAHH,CAGQ,MAAM;AACVJ,UAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAV,UAAAA,IAAI,CAACuB,IAAL,CAAU;AACRC,YAAAA,IAAI,EAAE,SADE;AAERC,YAAAA,KAAK,EAAE,cAFC;AAGRC,YAAAA,IAAI,EAAE;AAHE,WAAV;AAKD,SAVH;AAWD,OAZD,MAYO;AACL1B,QAAAA,IAAI,CAACuB,IAAL,CAAU;AACRC,UAAAA,IAAI,EAAE,OADE;AAERC,UAAAA,KAAK,EAAE,mBAFC;AAGRC,UAAAA,IAAI,EAAE,6BAHE;AAIRC,UAAAA,MAAM,EAAEN;AAJA,SAAV;AAMAX,QAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD;AACF,KAtBM,CAAP;AAuBD,GAzBD;;AA2BAZ,EAAAA,SAAS,CAAC,MAAM;AACdC,IAAAA,GAAG,CAACuB,OAAJ,GAAcR,IAAd,CAAoBT,IAAD,IAAU;AAC3BC,MAAAA,OAAO,CAACD,IAAD,CAAP;AACAK,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAF,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAJD;AAKD,GANQ,EAMN,EANM,CAAT;;AAQA,MAAI,CAACH,IAAD,IAASE,OAAb,EAAsB;AACpB,wBAAO,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,YAAP;AACD;;AAED,sBACE,QAAC,WAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE;AACLF,MAAAA,IADK;AAELQ,MAAAA,SAAS,EAAEF,eAFN;AAGLQ,MAAAA,MAAM,EAAEF,YAHH;AAILR,MAAAA;AAJK,KADT;AAAA,cAQGL,KAAK,CAACwB;AART;AAAA;AAAA;AAAA;AAAA,UADF;AAYD,CAhEM;;GAAMzB,Y;;KAAAA,Y","sourcesContent":["import React, { useState, createContext, useEffect } from \"react\";\nimport { api } from \"../api/api\";\nimport Swal from \"sweetalert2\";\nimport LoadingPage from \"../components/LoadingPage\";\n\nexport const UserContext = createContext();\n\nexport const UserProvider = (props) => {\n  const [user, setUser] = useState();\n  const [loading, setLoading] = useState(true);\n  const [pointsLoading, setPointsLoading] = useState(true);\n\n  const handleAddPoints = async (pointsToAdd) => {\n    setPointsLoading(true);\n    return api.addPoints(pointsToAdd).then((res) => {\n      setUser({ ...user, points: res[\"New Points\"] });\n      setPointsLoading(false);\n    });\n  };\n\n  const handleRedeem = async (id) => {\n    setPointsLoading(true);\n    return api.redeem(id).then(({ message, error }) => {\n      if (message) {\n        api\n          .getUser()\n          .then((user) => setUser(user))\n          .then(() => {\n            setPointsLoading(false);\n            Swal.fire({\n              icon: \"success\",\n              title: \"Product Buy!\",\n              text: \"Yes\",\n            });\n          });\n      } else {\n        Swal.fire({\n          icon: \"error\",\n          title: \"There is an error\",\n          text: \"Can't redeem now, try later\",\n          footer: error,\n        });\n        setPointsLoading(false);\n      }\n    });\n  };\n\n  useEffect(() => {\n    api.getUser().then((user) => {\n      setUser(user);\n      setPointsLoading(false);\n      setLoading(false);\n    });\n  }, []);\n\n  if (!user || loading) {\n    return <LoadingPage />;\n  }\n\n  return (\n    <UserContext.Provider\n      value={{\n        user,\n        addPoints: handleAddPoints,\n        redeem: handleRedeem,\n        pointsLoading,\n      }}\n    >\n      {props.children}\n    </UserContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}